# Система для проведения статистических экспериментов

## Назначение и общее описание

Система предназначена для автоматизированного проведения повторяемых статистических экспериментов с поддержкой множественных гипотез и статистических критериев. Она решает проблему ручного выполнения сложных вычислительных процедур, позволяя исследователям определить конфигурацию эксперимента один раз и получить полный набор результатов с минимальными человеческими усилиями. Основная цель - обеспечить масштабируемое, воспроизводимое исследование влияния различных факторов (тип распределения, размер выборки, мощность критерия) на качество статистических выводов.

## Архитектура системы

### Уровень конфигурирования

Архитектура построена на модульном принципе разделения ответственности. На верхнем уровне находится **слой конфигурирования**, который определяет полную спецификацию эксперимента через класс `ExperimentConfig`. Пользователь задаёт:

- **Тип гипотезы**: нормальное распределение (NORMAL), экспоненциальное (EXPONENTIAL) или распределение Вейбулла (WEIBULL)
- **Параметры распределения**: математическое ожидание, дисперсия, форма и масштаб в зависимости от типа
- **Размеры выборок**: набор значений для исследования влияния объёма данных на качество критериев
- **Уровни значимости**: множество пороговых значений (альфа-уровни) для проверки гипотез
- **Критерии согласия**: какие статистические тесты применять (критерий нормальности, критерий экспоненциальности, критерий Вейбулла)
- **Альтернативные гипотезы**: конкретные параметры, которыми отличается альтернатива от нулевой гипотезы
- **Режим выполнения**: стандартная обработка или пользовательская логика

### Уровень генерирования данных

**Слой генерирования** реализует три типа генераторов случайных величин через иерархию `AbstractRVSGenerator`:

- `NormalRVSGenerator` - создаёт выборки из нормального распределения с заданными параметрами
- `ExponentialRVSGenerator` - генерирует экспоненциально распределённые данные
- `WeibullRVSGenerator` - производит случайные числа из распределения Вейбулла

Каждый генератор принимает конфигурацию, размер выборки и количество экспериментов, возвращая матрицу случайных величин размером (количество повторений x размер выборки).

### Уровень выполнения экспериментов

Уровень **выполнения** включает три типа специализированных классов:

- `CriticalValueExecutionStep` - вычисляет критические значения для заданного статистического критерия и уровня значимости. Это пороговые значения, при превышении которых нулевая гипотеза отвергается
- `PowerExecutionStep` - определяет статистическую мощность (вероятность отвергнуть ложную нулевую гипотезу). Ключевой метрик качества критерия
- `TimeComplexityExecutionStep` - измеряет вычислительные затраты различных операций, позволяя оптимизировать алгоритмы

Каждый шаг использует соответствующую конфигурацию и хранилище данных для доступа к сгенерированным выборкам.

### Уровень статистических вычислений

Вычислительный слой реализует конкретные статистические алгоритмы через три фабрики экспериментов:

- `CriticalValueExperimentFactory` - создаёт последовательность операций для вычисления критических значений
- `PowerExperimentFactory` - организует расчёт мощности критерия через серию повторных тестирований
- `TimeComplexityExperimentFactory` - строит процедуру профилирования вычислительной сложности

Каждая фабрика координирует работу генератора данных, вычислительных шагов и системы сохранения результатов.

### Уровень хранилищ и персистентности

**Слой персистентности** обеспечивает организованное управление данными через четыре типа интерфейсов:

- `IRandomValuesStorage` - хранит сгенерированные случайные выборки, поддерживает вставку, удаление и запросы по фильтрам
- `ITimeComplexityStorage` - накапливает временные метрики и профили производительности
- `IPowerStorage` - сохраняет результаты мощности для различных конфигураций
- `IExperimentStorage` - хранит метаданные и статус экспериментов

Такое разделение хранилищ обеспечивает гибкость в выборе способа сохранения (база данных, файловая система, облачное хранилище).

### Уровень запросов и выборки данных

Система предоставляет специализированные классы запросов для эффективной работы с данными:

- `DataQuery` - базовый класс для фильтрации и извлечения данных
- `PowersQuery` - ориентирована на поиск результатов мощности по критериям
- `TimeComplexityQuery` - получает профили производительности

Запросы поддерживают фильтрацию по типу эксперимента, параметрам и уровню значимости, обеспечивая быстрый доступ к нужным результатам.

### Уровень статистических критериев и тестов

На уровне **статистического анализа** реализована иерархия критериев согласия через интерфейс `AbstractTestStatistic`:

- `AbstractNormalityTestStatistic` - тесты на нормальность
- `AbstractExponentialityTestStatistic` - тесты на экспоненциальность
- `AbstractWeibullTestStatistic` - тесты на соответствие распределению Вейбулла

### Уровень отчётности

**Слой отчётности** генерирует итоговую информацию через три типа построителей отчётов:

- `CriticalValueReportBuilder` - синтезирует таблицы критических значений с анализом их зависимости от параметров
- `PowerReportBuilder` - создаёт графики и таблицы мощности, показывающие эффективность критериев
- `TimeComplexityReportBuilder` - готовит анализ вычислительной сложности с рекомендациями по оптимизации

Отчёты содержат визуализации, статистические выводы и рекомендации для исследователя.

## Поток выполнения

Выполнение системы следует чёткому циклу:

1. **Инициализация**: Пользователь создаёт `ExperimentConfig`, определяя все параметры (тип распределения, размеры выборок, критерии)

2. **Генерирование данных**: Выбранный генератор (на основе типа гипотезы) создаёт набор случайных выборок размером от M^1 до M^n наблюдений

3. **Выполнение шагов эксперимента**: Система последовательно или параллельно запускает:
   - вычисление критических значений для каждого критерия и уровня значимости
   - расчёт мощности через повторное тестирование с параметрами альтернативной гипотезы
   - профилирование времени выполнения алгоритмов

4. **Сохранение результатов**: Каждый шаг сохраняет результаты в соответствующее хранилище

5. **Генерация отчёта**: Построители отчётов извлекают данные из хранилищ и формируют итоговую документацию

## Ключевые возможности

**Параллелизм**: Система поддерживает выполнение независимых экспериментов через рабочие процессы (`CriticalValueWorker`, `PowerWorker`, `TimeComplexityWorker`), обеспечивая масштабируемость на многопроцессорных системах.

**Модульность**: Каждый компонент (генератор, критерий, хранилище, построитель отчёта) реализует интерфейс и может быть заменён альтернативной реализацией без изменения остального кода.

**Воспроизводимость**: Сохранение полной конфигурации и всех промежуточных данных позволяет точно воспроизвести любой эксперимент и провести дополнительный анализ.

**Масштабируемость**: Система эффективно обрабатывает выскокосложные вычисления благодаря разделению работы между рабочими процессами и оптимизированной системе хранения.

## Практическое применение

Система предназначена для решения следующих задач:

- Сравнение качества различных статистических критериев при работе с реальными данными
- Определение оптимального размера выборки для достижения требуемой мощности теста
- Анализ чувствительности критериев к нарушениям предположений о виде распределения
- Оценка вычислительной сложности при масштабировании объёма данных
- Обоснование выбора статистического критерия для конкретной прикладной задачи
