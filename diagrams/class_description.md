# Диаграмма классов системы учёта дефектов

## Обзор
Диаграмма моделирует структуру данных системы и отношения между основными сущностями: пользователями, ресурсами производства, дефектами/ремонтами и отчётностью.

## Основные пакеты

### Users & Roles - Пользователи и роли
Содержит абстрактный класс User с семью наследниками, каждый представляет определённую роль в системе:
- Mechanic (ремонтник)
- Foreman (бригадир)
- Dispatcher (диспетчер)
- QCUser (контроль качества)
- ShopManager (начальник цеха)
- Accountant (бухгалтерия)
- Admin (администратор)

Каждый пользователь имеет id, полное имя, логин, email, роль и статус активности. Поле isActive позволяет деактивировать пользователя без удаления его из базы данных.

### Production & Resources - Производство и ресурсы
Содержит информацию об инфраструктуре и кадровом обеспечении:

**Vehicle** - автомобиль в производстве с VIN, номером заказа, цветом, конфигурацией, статусом и текущей стадией производства.

**RepairZone** - ремонтная зона участка конвейера. Содержит 1-6 ремонтных мест (RepairBay).

**RepairBay** - отдельное ремонтное место со статусом (свободно, занято, зарезервировано, вне обслуживания).

**Team** - ремонтная бригада с бригадиром-лидером и несколькими ремонтниками.

**Shift** - смена с датой, номером смены в день и временем начала/конца.

**MechanicShift** - связывает ремонтника со смены, бригадой и ремонтной зоной. Фиксирует присутствие и готовность к работе.

### Defects & Repairs - Дефекты и ремонты
Ядро системы с потоком: обнаружение дефекта -> регистрация -> назначение ремонта -> выполнение -> закрытие.

**Defect** - зарегистрированный дефект с местом на схеме, вероятной причиной, серьёзностью и статусом.

**RepairOrder** - задача на ремонт одного дефекта. Содержит время начала/конца, диагноз, выполненные действия и статус.

**WorkLog** - запись о времени работы ремонтника: начало, конец, продолжительность в минутах.

**Assignment** - назначение работы ремонтнику бригадиром с отслеживанием статуса (назначено, принято, переназначено, отклонено).

**Attachment** - приложение (фото, диаграмма, документ) к дефекту или ремонту в качестве доказательства.

### Reporting - Отчётность
**ReportSnapshot** - материализованные отчёты (QC по смене, начальник цеха по смене, бригадир по смене, бухгалтерия по месяцу) с метриками в JSON-формате. Сохраняются для воспроизводимости и разгрузки аналитики от основной БД.

## Ключевые отношения

- Один автомобиль может иметь несколько дефектов
- Один дефект требует одного или нескольких ремонтов (RepairOrder)
- Ремонтник фиксирует время работы через WorkLog для каждого ремонта
- MechanicShift связывает ремонтника с конкретной сменой и зоной, где он работает
- Отчёты генерируются по смене или месяцу и привязаны к ремонтнику, бригаде или зоне
